/**
 * generator-cg-gas - Yeoman Generator for Enterprise Angular projects, with Gulp Angular Sass
 * @version v3.3.4
 * @link https://github.com/Lunatic83/generator-cg-gas
 * @license 
 */
!function(){function configure($urlRouterProvider,$locationProvider){$locationProvider.html5Mode({enabled:!1,requireBase:!1}),$urlRouterProvider.otherwise("/")}function runBlock($rootScope){$rootScope.safeApply=function(fn){var phase=$rootScope.$$phase;"$apply"===phase||"$digest"===phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)}}angular.module("tsp",["ui.bootstrap","ui.utils","ui.router","ngAnimate","ngResource","templates","tsp.main"]).config(configure).run(runBlock),configure.$inject=["$urlRouterProvider","$locationProvider"],runBlock.$inject=["$rootScope"]}(),function(module){try{module=angular.module("templates")}catch(err){module=angular.module("templates",[])}module.run(["$templateCache",function($templateCache){"use strict";$templateCache.put("modules/main/directive/graph/graph.html",'<div id="graph-workspace">\n\n\n</div>\n')}])}(),function(module){try{module=angular.module("templates")}catch(err){module=angular.module("templates",[])}module.run(["$templateCache",function($templateCache){"use strict";$templateCache.put("modules/main/partial/index/index.html",'<div class="row">\n    <div class="col-lg-12">\n        <h1>Solve TSP with firefly solver</h1>\n\n        <div class="row">\n            <div class="col-lg-12">\n                <form class="form-horizontal">\n                    <div class="form-group">\n                        <label for="fCount" class="col-sm-2 control-label">Firefly count:</label>\n\n                        <div class="col-sm-10">\n                            <input type="number" class="form-control" id="fCount"\n                                   ng-model="vm.parameters.number_of_individuals">\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label for="fCount2" class="col-sm-2 control-label">Number of cities:</label>\n\n                        <div class="col-sm-10">\n                            <input type="number" class="form-control" id="fCount2"\n                                   ng-model="vm.parameters.number_of_cities">\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label for="fFactorAlpha" class="col-sm-2 control-label">Factor &alpha;:</label>\n\n                        <div class="col-sm-10">\n                            <input type="number" class="form-control" id="fFactorAlpha" ng-model="vm.parameters.alpha">\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label for="fFactorBeta" class="col-sm-2 control-label">Factor &beta;:</label>\n\n                        <div class="col-sm-10">\n                            <input type="number" class="form-control" id="fFactorBeta" ng-model="vm.parameters.beta">\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label for="fFactorGamma" class="col-sm-2 control-label">Factor &gamma;:</label>\n\n                        <div class="col-sm-10">\n                            <input type="number" class="form-control" id="fFactorGamma" ng-model="vm.parameters.gamma">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label for="fIterationsCount" class="col-sm-2 control-label">Iterations count:</label>\n\n                        <div class="col-sm-10">\n                            <input type="number" class="form-control" id="fIterationsCount"\n                                   ng-model="vm.parameters.iterations">\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <div class="col-sm-offset-2 col-sm-10 text-center">\n                            <button type="submit" class="btn btn-default" ng-click="vm.run()">Run It</button>\n                        </div>\n                    </div>\n                </form>\n\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-lg-12">\n                <graph nodes="vm.nodes"></graph>\n            </div>\n        </div>\n    </div>\n\n</div>\n')}])}(),function(){angular.module("tsp.main",["ui.bootstrap","ui.utils","ui.router","ngAnimate"]),angular.module("tsp.main").config(["$stateProvider",function($stateProvider){$stateProvider.state("main",{url:"/",templateUrl:"modules/main/partial/index/index.html",controller:"IndexCtrl",controllerAs:"vm"})}])}(),function(){function IndexCtrl(SolverService){function run(){SolverService.run(vm.parameters,function(data){vm.nodes=data.route,startPolling(data.id)})}function startPolling(id){var interval=setInterval(function(){SolverService.state({id:id},function(data){vm.nodes=data.route,data.done===!0&&clearInterval(interval)})},100)}var vm=this;vm.run=run,vm.parameters={number_of_individuals:25,alpha:1,beta:1,gamma:1,iterations:200,number_of_cities:20},vm.nodes=[{x:100,y:100},{x:200,y:230},{x:90,y:129},{x:100,y:220},{x:79,y:100}]}angular.module("tsp.main").controller("IndexCtrl",IndexCtrl),IndexCtrl.$inject=["SolverService"]}(),function(){function SolverService($resource){return $resource("/:type/:id",{},{run:{method:"POST",isArray:!1,params:{type:"run"}},state:{method:"GET",isArray:!1,params:{type:"state"}}})}angular.module("tsp.main").factory("SolverService",SolverService),SolverService.$inject=["$resource"]}(),function(){function GraphDirective(){return{restrict:"E",replace:!0,scope:{nodes:"=nodes"},templateUrl:"modules/main/directive/graph/graph.html",link:function($scope,element,attrs,fn){function tick(){path.attr("d",function(d){var sourceX=10*Number(d.source.x),sourceY=10*Number(d.source.y),targetX=10*Number(d.target.x),targetY=10*Number(d.target.y);return"M"+sourceX+","+sourceY+"A0,0 0 0,1 "+targetX+","+targetY})}function createLinks(nodes){var current,last,links=[];return _.forEach(nodes,function(node){void 0==current?current=node:(last=current,current=node,links.push({source:last,target:current}))}),links.push({source:current,target:nodes[0]}),links}var path,circle,width=$("#graph-workspace").width(),height=$("#graph-workspace").height(),svg=d3.select("#graph-workspace").append("svg:svg").attr("width",width).attr("height",height);svg.append("svg:defs").selectAll("marker").data(["suit","licensing","resolved"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",-1.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5"),$scope.$watch("nodes",function(nodes){var links=createLinks(nodes);void 0!=path&&path.remove(),void 0!=circle&&circle.remove(),path=svg.append("svg:g").selectAll("path").data(links).enter().append("svg:path").attr("class",function(d){return"link "+d.type}),circle=svg.append("svg:g").selectAll("circle").data(nodes).enter().append("svg:circle").attr("r",6).attr("cx",function(d){return 10*Number(d.x)}).attr("cy",function(d){return 10*Number(d.y)}),tick()},!0)}}}angular.module("tsp.main").directive("graph",GraphDirective)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvYXBwLmpzIl0sIm5hbWVzIjpbImNvbmZpZ3VyZSIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiZW5hYmxlZCIsInJlcXVpcmVCYXNlIiwib3RoZXJ3aXNlIiwicnVuQmxvY2siLCIkcm9vdFNjb3BlIiwic2FmZUFwcGx5IiwiZm4iLCJwaGFzZSIsIiQkcGhhc2UiLCJ0aGlzIiwiJGFwcGx5IiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsInJ1biIsIiRpbmplY3QiLCJlcnIiLCIkdGVtcGxhdGVDYWNoZSIsInB1dCIsIiRzdGF0ZVByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJJbmRleEN0cmwiLCJTb2x2ZXJTZXJ2aWNlIiwidm0iLCJwYXJhbWV0ZXJzIiwiZGF0YSIsIm5vZGVzIiwicm91dGUiLCJzdGFydFBvbGxpbmciLCJpZCIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJkb25lIiwiY2xlYXJJbnRlcnZhbCIsIm51bWJlcl9vZl9pbmRpdmlkdWFscyIsImFscGhhIiwiYmV0YSIsImdhbW1hIiwiaXRlcmF0aW9ucyIsIm51bWJlcl9vZl9jaXRpZXMiLCJ4IiwieSIsIiRyZXNvdXJjZSIsIm1ldGhvZCIsImlzQXJyYXkiLCJwYXJhbXMiLCJ0eXBlIiwiZmFjdG9yeSIsIkdyYXBoRGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwic2NvcGUiLCJsaW5rIiwiJHNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwidGljayIsInBhdGgiLCJhdHRyIiwiZCIsInNvdXJjZVgiLCJOdW1iZXIiLCJzb3VyY2UiLCJzb3VyY2VZIiwidGFyZ2V0WCIsInRhcmdldCIsInRhcmdldFkiLCJjcmVhdGVMaW5rcyIsImN1cnJlbnQiLCJsYXN0IiwibGlua3MiLCJfIiwiZm9yRWFjaCIsIm5vZGUiLCJ1bmRlZmluZWQiLCJwdXNoIiwiY2lyY2xlIiwid2lkdGgiLCIkIiwiaGVpZ2h0Iiwic3ZnIiwiZDMiLCJzZWxlY3QiLCJhcHBlbmQiLCJzZWxlY3RBbGwiLCJlbnRlciIsIlN0cmluZyIsIiR3YXRjaCIsInJlbW92ZSIsImRpcmVjdGl2ZSJdLCJtYXBwaW5ncyI6IkNBQUEsV0FpQkksUUFBU0EsV0FBVUMsbUJBQW9CQyxtQkFDbkNBLGtCQUFrQkMsV0FDZEMsU0FBUyxFQUNUQyxhQUFhLElBSWpCSixtQkFBbUJLLFVBQVUsS0FLakMsUUFBU0MsVUFBU0MsWUFDZEEsV0FBV0MsVUFBWSxTQUFVQyxJQUM3QixHQUFJQyxPQUFRSCxXQUFXSSxPQUNULFlBQVZELE9BQWdDLFlBQVZBLE1BQ2xCRCxJQUFzQixrQkFBZixLQUNQQSxLQUdKRyxLQUFLQyxPQUFPSixLQXBDeEJLLFFBQ0tDLE9BQU8sT0FDSixlQUNBLFdBQ0EsWUFDQSxZQUNBLGFBQ0EsWUFDQSxhQUVIQyxPQUFPakIsV0FDUGtCLElBQUlYLFVBRVRQLFVBQVVtQixTQUFXLHFCQUFzQixxQkFDM0NaLFNBQVNZLFNBQVcsaUJBOEJ4QixTQUFVSCxRQUNWLElBQU1BLE9BQVNELFFBQVFDLE9BQU8sYUFDOUIsTUFBTUksS0FBT0osT0FBU0QsUUFBUUMsT0FBTyxnQkFDckNBLE9BQU9FLEtBQUssaUJBQWtCLFNBQVNHLGdCQUNyQyxZQUNBQSxnQkFBZUMsSUFBSSwwQ0FDakIsa0RBUUosU0FBVU4sUUFDVixJQUFNQSxPQUFTRCxRQUFRQyxPQUFPLGFBQzlCLE1BQU1JLEtBQU9KLE9BQVNELFFBQVFDLE9BQU8sZ0JBQ3JDQSxPQUFPRSxLQUFLLGlCQUFrQixTQUFTRyxnQkFDckMsWUFDQUEsZ0JBQWVDLElBQUksd0NBQ2pCLDRtR0EwRUosV0FDSVAsUUFBUUMsT0FBTyxZQUFhLGVBQWdCLFdBQVksWUFBYSxjQUVyRUQsUUFBUUMsT0FBTyxZQUFZQyxRQUFBLGlCQUFPLFNBQVVNLGdCQUN4Q0EsZUFBZUMsTUFBTSxRQUNqQkMsSUFBSyxJQUNMQyxZQUFhLHdDQUNiQyxXQUFZ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U0FHS2QsUUFBVkUsUUFDQUEsT0FBT1ksU0FHWC9CLEtBQU91QixJQUFJRyxPQUFPLFNBQVNDLFVBQVUsUUFDaEMzRCxLQUFLNkMsT0FDTGUsUUFBUUYsT0FBTyxZQUNmekIsS0FBSyxRQUFTLFNBQVVDLEdBQ3JCLE1BQU8sUUFBVUEsRUFBRWIsT0FHM0I4QixPQUFTSSxJQUFJRyxPQUFPLFNBQVNDLFVBQVUsVUFDbEMzRCxLQUFLQyxPQUNMMkQsUUFBUUYsT0FBTyxjQUNmekIsS0FBSyxJQUFLLEdBQ1ZBLEtBQUssS0FBTSxTQUFVQyxHQUNsQixNQUFxQixJQUFkRSxPQUFPRixFQUFFbkIsS0FFbkJrQixLQUFLLEtBQU0sU0FBVUMsR0FDbEIsTUFBcUIsSUFBZEUsT0FBT0YsRUFBRWxCLEtBR3hCZSxTQUVELEtBakZmakQsUUFBUUMsT0FBTyxZQUFZaUYsVUFBVSxRQUFTekMiLCJmaWxlIjoic2NyaXB0cy9hcHAtMTQwOTk1MDQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndHNwJywgW1xuICAgICAgICAgICAgJ3VpLmJvb3RzdHJhcCcsXG4gICAgICAgICAgICAndWkudXRpbHMnLFxuICAgICAgICAgICAgJ3VpLnJvdXRlcicsXG4gICAgICAgICAgICAnbmdBbmltYXRlJyxcbiAgICAgICAgICAgICduZ1Jlc291cmNlJyxcbiAgICAgICAgICAgICd0ZW1wbGF0ZXMnLFxuICAgICAgICAgICAgJ3RzcC5tYWluJ1xuICAgICAgICBdKVxuICAgICAgICAuY29uZmlnKGNvbmZpZ3VyZSlcbiAgICAgICAgLnJ1bihydW5CbG9jayk7XG5cbiAgICBjb25maWd1cmUuJGluamVjdCA9IFsnJHVybFJvdXRlclByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJ107XG4gICAgcnVuQmxvY2suJGluamVjdCA9IFsnJHJvb3RTY29wZSddO1xuXG4gICAgZnVuY3Rpb24gY29uZmlndXJlKCR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgcmVxdWlyZUJhc2U6IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qIEFkZCBOZXcgU3RhdGVzIEFib3ZlICovXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcblxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gcnVuQmxvY2soJHJvb3RTY29wZSkge1xuICAgICAgICAkcm9vdFNjb3BlLnNhZmVBcHBseSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgdmFyIHBoYXNlID0gJHJvb3RTY29wZS4kJHBoYXNlO1xuICAgICAgICAgICAgaWYgKHBoYXNlID09PSAnJGFwcGx5JyB8fCBwaGFzZSA9PT0gJyRkaWdlc3QnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZuICYmICh0eXBlb2YoZm4pID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kYXBwbHkoZm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuXG59KSgpO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkgeyBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlc1wiKTsgfVxuY2F0Y2goZXJyKSB7IG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGVzXCIsIFtdKTsgfVxubW9kdWxlLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwibW9kdWxlcy9tYWluL2RpcmVjdGl2ZS9ncmFwaC9ncmFwaC5odG1sXCIsXG4gICAgXCI8ZGl2IGlkPVxcXCJncmFwaC13b3Jrc3BhY2VcXFwiPlxcblwiICtcbiAgICBcIlxcblwiICtcbiAgICBcIlxcblwiICtcbiAgICBcIjwvZGl2PlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7IG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGVzXCIpOyB9XG5jYXRjaChlcnIpIHsgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZXNcIiwgW10pOyB9XG5tb2R1bGUucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJtb2R1bGVzL21haW4vcGFydGlhbC9pbmRleC9pbmRleC5odG1sXCIsXG4gICAgXCI8ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPlxcblwiICtcbiAgICBcIiAgICA8ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgPGgxPlNvbHZlIFRTUCB3aXRoIGZpcmVmbHkgc29sdmVyPC9oMT5cXG5cIiArXG4gICAgXCJcXG5cIiArXG4gICAgXCIgICAgICAgIDxkaXYgY2xhc3M9XFxcInJvd1xcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgPGZvcm0gY2xhc3M9XFxcImZvcm0taG9yaXpvbnRhbFxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJmQ291bnRcXFwiIGNsYXNzPVxcXCJjb2wtc20tMiBjb250cm9sLWxhYmVsXFxcIj5GaXJlZmx5IGNvdW50OjwvbGFiZWw+XFxuXCIgK1xuICAgIFwiXFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29sLXNtLTEwXFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcIm51bWJlclxcXCIgY2xhc3M9XFxcImZvcm0tY29udHJvbFxcXCIgaWQ9XFxcImZDb3VudFxcXCJcXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nLW1vZGVsPVxcXCJ2bS5wYXJhbWV0ZXJzLm51bWJlcl9vZl9pbmRpdmlkdWFsc1xcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcImZDb3VudDJcXFwiIGNsYXNzPVxcXCJjb2wtc20tMiBjb250cm9sLWxhYmVsXFxcIj5OdW1iZXIgb2YgY2l0aWVzOjwvbGFiZWw+XFxuXCIgK1xuICAgIFwiXFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29sLXNtLTEwXFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcIm51bWJlclxcXCIgY2xhc3M9XFxcImZvcm0tY29udHJvbFxcXCIgaWQ9XFxcImZDb3VudDJcXFwiXFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZy1tb2RlbD1cXFwidm0ucGFyYW1ldGVycy5udW1iZXJfb2ZfY2l0aWVzXFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcblwiICtcbiAgICBcIiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwiZkZhY3RvckFscGhhXFxcIiBjbGFzcz1cXFwiY29sLXNtLTIgY29udHJvbC1sYWJlbFxcXCI+RmFjdG9yICZhbHBoYTs6PC9sYWJlbD5cXG5cIiArXG4gICAgXCJcXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb2wtc20tMTBcXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwibnVtYmVyXFxcIiBjbGFzcz1cXFwiZm9ybS1jb250cm9sXFxcIiBpZD1cXFwiZkZhY3RvckFscGhhXFxcIiBuZy1tb2RlbD1cXFwidm0ucGFyYW1ldGVycy5hbHBoYVxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcImZGYWN0b3JCZXRhXFxcIiBjbGFzcz1cXFwiY29sLXNtLTIgY29udHJvbC1sYWJlbFxcXCI+RmFjdG9yICZiZXRhOzo8L2xhYmVsPlxcblwiICtcbiAgICBcIlxcblwiICtcbiAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbC1zbS0xMFxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJudW1iZXJcXFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2xcXFwiIGlkPVxcXCJmRmFjdG9yQmV0YVxcXCIgbmctbW9kZWw9XFxcInZtLnBhcmFtZXRlcnMuYmV0YVxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcImZGYWN0b3JHYW1tYVxcXCIgY2xhc3M9XFxcImNvbC1zbS0yIGNvbnRyb2wtbGFiZWxcXFwiPkZhY3RvciAmZ2FtbWE7OjwvbGFiZWw+XFxuXCIgK1xuICAgIFwiXFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29sLXNtLTEwXFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcIm51bWJlclxcXCIgY2xhc3M9XFxcImZvcm0tY29udHJvbFxcXCIgaWQ9XFxcImZGYWN0b3JHYW1tYVxcXCIgbmctbW9kZWw9XFxcInZtLnBhcmFtZXRlcnMuZ2FtbWFcXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcblwiICtcbiAgICBcIiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuXCIgK1xuICAgIFwiXFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJmSXRlcmF0aW9uc0NvdW50XFxcIiBjbGFzcz1cXFwiY29sLXNtLTIgY29udHJvbC1sYWJlbFxcXCI+SXRlcmF0aW9ucyBjb3VudDo8L2xhYmVsPlxcblwiICtcbiAgICBcIlxcblwiICtcbiAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbC1zbS0xMFxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJudW1iZXJcXFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2xcXFwiIGlkPVxcXCJmSXRlcmF0aW9uc0NvdW50XFxcIlxcblwiICtcbiAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmctbW9kZWw9XFxcInZtLnBhcmFtZXRlcnMuaXRlcmF0aW9uc1xcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbC1zbS1vZmZzZXQtMiBjb2wtc20tMTAgdGV4dC1jZW50ZXJcXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XFxcInN1Ym1pdFxcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdFxcXCIgbmctY2xpY2s9XFxcInZtLnJ1bigpXFxcIj5SdW4gSXQ8L2J1dHRvbj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcblwiICtcbiAgICBcIiAgICAgICAgICAgICAgICA8L2Zvcm0+XFxuXCIgK1xuICAgIFwiXFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgPC9kaXY+XFxuXCIgK1xuICAgIFwiICAgICAgICA8L2Rpdj5cXG5cIiArXG4gICAgXCIgICAgICAgIDxkaXYgY2xhc3M9XFxcInJvd1xcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICAgICAgPGdyYXBoIG5vZGVzPVxcXCJ2bS5ub2Rlc1xcXCI+PC9ncmFwaD5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICA8L2Rpdj5cXG5cIiArXG4gICAgXCIgICAgICAgIDwvZGl2PlxcblwiICtcbiAgICBcIiAgICA8L2Rpdj5cXG5cIiArXG4gICAgXCJcXG5cIiArXG4gICAgXCI8L2Rpdj5cXG5cIiArXG4gICAgXCJcIik7XG59XSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIGFuZ3VsYXIubW9kdWxlKCd0c3AubWFpbicsIFsndWkuYm9vdHN0cmFwJywgJ3VpLnV0aWxzJywgJ3VpLnJvdXRlcicsICduZ0FuaW1hdGUnXSk7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgndHNwLm1haW4nKS5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdtYWluJywge1xuICAgICAgICAgICAgdXJsOiAnLycsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21vZHVsZXMvbWFpbi9wYXJ0aWFsL2luZGV4L2luZGV4Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0luZGV4Q3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICAgICAgfSk7XG4gICAgICAgIC8qIEFkZCBOZXcgU3RhdGVzIEFib3ZlICovXG5cbiAgICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhci5tb2R1bGUoJ3RzcC5tYWluJykuY29udHJvbGxlcignSW5kZXhDdHJsJywgSW5kZXhDdHJsKTtcblxuICAgIEluZGV4Q3RybC4kaW5qZWN0ID0gWydTb2x2ZXJTZXJ2aWNlJ107XG5cbiAgICBmdW5jdGlvbiBJbmRleEN0cmwoU29sdmVyU2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2YXIgaWQ7XG4gICAgICAgIHZtLnJ1biA9IHJ1bjtcblxuICAgICAgICB2bS5wYXJhbWV0ZXJzID0ge1xuICAgICAgICAgICAgbnVtYmVyX29mX2luZGl2aWR1YWxzOiAyNSxcbiAgICAgICAgICAgIGFscGhhOiAxLFxuICAgICAgICAgICAgYmV0YTogMSxcbiAgICAgICAgICAgIGdhbW1hOiAxLFxuICAgICAgICAgICAgaXRlcmF0aW9uczogMjAwLFxuICAgICAgICAgICAgbnVtYmVyX29mX2NpdGllczogMjBcbiAgICAgICAgfTtcblxuICAgICAgICB2bS5ub2RlcyA9IFtcbiAgICAgICAgICAgIHt4OiAxMDAsIHk6IDEwMH0sXG4gICAgICAgICAgICB7eDogMjAwLCB5OiAyMzB9LFxuICAgICAgICAgICAge3g6IDkwLCB5OiAxMjl9LFxuICAgICAgICAgICAge3g6IDEwMCwgeTogMjIwfSxcbiAgICAgICAgICAgIHt4OiA3OSwgeTogMTAwfVxuICAgICAgICBdO1xuXG4gICAgICAgIGZ1bmN0aW9uIHJ1bigpIHtcbiAgICAgICAgICAgIFNvbHZlclNlcnZpY2UucnVuKHZtLnBhcmFtZXRlcnMsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgdm0ubm9kZXMgPSBkYXRhLnJvdXRlO1xuICAgICAgICAgICAgICAgIHN0YXJ0UG9sbGluZyhkYXRhLmlkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc3RhcnRQb2xsaW5nKGlkKSB7XG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgU29sdmVyU2VydmljZS5zdGF0ZSh7aWQ6IGlkfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ubm9kZXMgPSBkYXRhLnJvdXRlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kb25lID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9XG5cbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3RzcC5tYWluJykuZmFjdG9yeSgnU29sdmVyU2VydmljZScsIFNvbHZlclNlcnZpY2UpO1xuICAgIFNvbHZlclNlcnZpY2UuJGluamVjdCA9IFsnJHJlc291cmNlJ107XG5cbiAgICBmdW5jdGlvbiBTb2x2ZXJTZXJ2aWNlKCRyZXNvdXJjZSkge1xuICAgICAgICByZXR1cm4gJHJlc291cmNlKFwiLzp0eXBlLzppZFwiLCB7fSwge1xuICAgICAgICAgICAgcnVuOiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaXNBcnJheTogZmFsc2UsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7dHlwZTogJ3J1bid9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RhdGU6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGlzQXJyYXk6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHBhcmFtczoge3R5cGU6ICdzdGF0ZSd9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBhbmd1bGFyLm1vZHVsZSgndHNwLm1haW4nKS5kaXJlY3RpdmUoJ2dyYXBoJywgR3JhcGhEaXJlY3RpdmUpO1xuXG4gICAgZnVuY3Rpb24gR3JhcGhEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgbm9kZXM6IFwiPW5vZGVzXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21vZHVsZXMvbWFpbi9kaXJlY3RpdmUvZ3JhcGgvZ3JhcGguaHRtbCcsXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoJHNjb3BlLCBlbGVtZW50LCBhdHRycywgZm4pIHtcblxuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9ICQoJyNncmFwaC13b3Jrc3BhY2UnKS53aWR0aCgpO1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSAkKCcjZ3JhcGgtd29ya3NwYWNlJykuaGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgdmFyIHBhdGg7XG4gICAgICAgICAgICAgICAgdmFyIGNpcmNsZTtcblxuICAgICAgICAgICAgICAgIHZhciBzdmcgPSBkMy5zZWxlY3QoXCIjZ3JhcGgtd29ya3NwYWNlXCIpLmFwcGVuZChcInN2ZzpzdmdcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KTtcblxuXG4gICAgICAgICAgICAgICAgc3ZnLmFwcGVuZChcInN2ZzpkZWZzXCIpLnNlbGVjdEFsbChcIm1hcmtlclwiKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShbXCJzdWl0XCIsIFwibGljZW5zaW5nXCIsIFwicmVzb2x2ZWRcIl0pXG4gICAgICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZChcInN2ZzptYXJrZXJcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJpZFwiLCBTdHJpbmcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidmlld0JveFwiLCBcIjAgLTUgMTAgMTBcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJyZWZYXCIsIDE1KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInJlZllcIiwgLTEuNSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJtYXJrZXJXaWR0aFwiLCA2KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcIm1hcmtlckhlaWdodFwiLCA2KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcIm9yaWVudFwiLCBcImF1dG9cIilcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChcInN2ZzpwYXRoXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBcIk0wLC01TDEwLDBMMCw1XCIpO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdGljaygpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5hdHRyKFwiZFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZVggPSBOdW1iZXIoZC5zb3VyY2UueCkgKiAxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2VZID0gTnVtYmVyKGQuc291cmNlLnkpICogMTA7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0WCA9IE51bWJlcihkLnRhcmdldC54KSAqIDEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldFkgPSBOdW1iZXIoZC50YXJnZXQueSkgKiAxMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy92YXIgZHggPSBkLnRhcmdldC54IC0gZC5zb3VyY2UueCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIGR5ID0gZC50YXJnZXQueSAtIGQuc291cmNlLnksXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBkciA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJNXCIgKyBzb3VyY2VYICsgXCIsXCIgKyBzb3VyY2VZICsgXCJBXCIgKyAwICsgXCIsXCIgKyAwICsgXCIgMCAwLDEgXCIgKyB0YXJnZXRYICsgXCIsXCIgKyB0YXJnZXRZO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICRzY29wZS4kd2F0Y2goJ25vZGVzJywgZnVuY3Rpb24gKG5vZGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW5rcyA9IGNyZWF0ZUxpbmtzKG5vZGVzKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocGF0aCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY2lyY2xlICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2lyY2xlLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHN2Zy5hcHBlbmQoXCJzdmc6Z1wiKS5zZWxlY3RBbGwoXCJwYXRoXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShsaW5rcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZChcInN2ZzpwYXRoXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibGluayBcIiArIGQudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNpcmNsZSA9IHN2Zy5hcHBlbmQoXCJzdmc6Z1wiKS5zZWxlY3RBbGwoXCJjaXJjbGVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKG5vZGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwic3ZnOmNpcmNsZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJyXCIsIDYpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcImN4XCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihkLngpICogMTA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjeVwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOdW1iZXIoZC55KSAqIDEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGljaygpO1xuXG4gICAgICAgICAgICAgICAgfSwgdHJ1ZSk7XG5cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUxpbmtzKG5vZGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW5rcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3Q7XG5cbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKG5vZGVzLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QgPSBjdXJyZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBub2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtzLnB1c2goe3NvdXJjZTogbGFzdCwgdGFyZ2V0OiBjdXJyZW50fSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbGlua3MucHVzaCh7c291cmNlOiBjdXJyZW50LCB0YXJnZXQ6IG5vZGVzWzBdfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaW5rcztcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9